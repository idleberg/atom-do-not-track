"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var e=t(require("path")),n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=i;function i(t,e,n){t instanceof RegExp&&(t=s(t,n)),e instanceof RegExp&&(e=s(e,n));var r=a(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function s(t,e){var n=e.match(t);return n?n[0]:null}function a(t,e,n){var r,i,s,a,o,u=n.indexOf(t),h=n.indexOf(e,u+1),c=u;if(u>=0&&h>0){if(t===e)return[u,h];for(r=[],s=n.length;c>=0&&!o;)c==u?(r.push(c),u=n.indexOf(t,c+1)):1==r.length?o=[r.pop(),h]:((i=r.pop())<s&&(s=i,a=h),h=n.indexOf(e,c+1)),c=u<h&&u>=0?u:h;r.length&&(o=[s,a])}return o}i.range=a;var o=function(t){if(!t)return[];"{}"===t.substr(0,2)&&(t="\\{\\}"+t.substr(2));return j(function(t){return t.split("\\\\").join(u).split("\\{").join(h).split("\\}").join(c).split("\\,").join(p).split("\\.").join(f)}(t),!0).map(g)},u="\0SLASH"+Math.random()+"\0",h="\0OPEN"+Math.random()+"\0",c="\0CLOSE"+Math.random()+"\0",p="\0COMMA"+Math.random()+"\0",f="\0PERIOD"+Math.random()+"\0";function l(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function g(t){return t.split(u).join("\\").split(h).join("{").split(c).join("}").split(p).join(",").split(f).join(".")}function d(t){if(!t)return[""];var e=[],n=r("{","}",t);if(!n)return t.split(",");var i=n.pre,s=n.body,a=n.post,o=i.split(",");o[o.length-1]+="{"+s+"}";var u=d(a);return a.length&&(o[o.length-1]+=u.shift(),o.push.apply(o,u)),e.push.apply(e,o),e}function b(t){return"{"+t+"}"}function m(t){return/^-?0\d/.test(t)}function v(t,e){return t<=e}function y(t,e){return t>=e}function j(t,e){var i=[],s=r("{","}",t);if(!s||/\$$/.test(s.pre))return[t];var a,o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),h=o||u,p=s.body.indexOf(",")>=0;if(!h&&!p)return s.post.match(/,.*\}/)?j(t=s.pre+"{"+s.body+c+s.post):[t];if(h)a=s.body.split(/\.\./);else if(1===(a=d(s.body)).length&&1===(a=j(a[0],!1).map(b)).length)return(w=s.post.length?j(s.post,!1):[""]).map((function(t){return s.pre+a[0]+t}));var f,g=s.pre,w=s.post.length?j(s.post,!1):[""];if(h){var x=l(a[0]),O=l(a[1]),E=Math.max(a[0].length,a[1].length),A=3==a.length?Math.abs(l(a[2])):1,S=v;O<x&&(A*=-1,S=y);var $=a.some(m);f=[];for(var M=x;S(M,O);M+=A){var R;if(u)"\\"===(R=String.fromCharCode(M))&&(R="");else if(R=String(M),$){var k=E-R.length;if(k>0){var C=new Array(k+1).join("0");R=M<0?"-"+C+R.slice(1):C+R}}f.push(R)}}else f=function(t,e){for(var r=[],i=0;i<t.length;i++){var s=e(t[i],i);n(s)?r.push.apply(r,s):r.push(s)}return r}(a,(function(t){return j(t,!1)}));for(var T=0;T<f.length;T++)for(var L=0;L<w.length;L++){var N=g+f[T]+w[L];(!e||h||N)&&i.push(N)}return i}var w=M;M.Minimatch=R;var x={sep:"/"};try{x=e.default}catch(t){}var O=M.GLOBSTAR=R.GLOBSTAR={},E={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},A="().*{}+?[]^$\\!".split("").reduce((function(t,e){return t[e]=!0,t}),{});var S=/\/+/;function $(t,e){t=t||{},e=e||{};var n={};return Object.keys(e).forEach((function(t){n[t]=e[t]})),Object.keys(t).forEach((function(e){n[e]=t[e]})),n}function M(t,e,n){if("string"!=typeof e)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===e.charAt(0))&&(""===e.trim()?""===t:new R(e,n).match(t))}function R(t,e){if(!(this instanceof R))return new R(t,e);if("string"!=typeof t)throw new TypeError("glob pattern string required");e||(e={}),t=t.trim(),"/"!==x.sep&&(t=t.split(x.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function k(t,e){if(e||(e=this instanceof R?this.options:{}),void 0===(t=void 0===t?this.pattern:t))throw new TypeError("undefined pattern");return e.nobrace||!t.match(/\{.*\}/)?[t]:o(t)}M.filter=function(t,e){return e=e||{},function(n,r,i){return M(n,t,e)}},M.defaults=function(t){if(!t||!Object.keys(t).length)return M;var e=M,n=function(n,r,i){return e.minimatch(n,r,$(t,i))};return n.Minimatch=function(n,r){return new e.Minimatch(n,$(t,r))},n},R.defaults=function(t){return t&&Object.keys(t).length?M.defaults(t).Minimatch:R},R.prototype.debug=function(){},R.prototype.make=function(){if(this._made)return;var t=this.pattern,e=this.options;if(!e.nocomment&&"#"===t.charAt(0))return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error);this.debug(this.pattern,n),n=this.globParts=n.map((function(t){return t.split(S)})),this.debug(this.pattern,n),n=n.map((function(t,e,n){return t.map(this.parse,this)}),this),this.debug(this.pattern,n),n=n.filter((function(t){return-1===t.indexOf(!1)})),this.debug(this.pattern,n),this.set=n},R.prototype.parseNegate=function(){var t=this.pattern,e=!1,n=this.options,r=0;if(n.nonegate)return;for(var i=0,s=t.length;i<s&&"!"===t.charAt(i);i++)e=!e,r++;r&&(this.pattern=t.substr(r));this.negate=e},M.braceExpand=function(t,e){return k(t,e)},R.prototype.braceExpand=k,R.prototype.parse=function(t,e){if(t.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===t)return O;if(""===t)return"";var r,i="",s=!!n.nocase,a=!1,o=[],u=[],h=!1,c=-1,p=-1,f="."===t.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",l=this;function g(){if(r){switch(r){case"*":i+="[^/]*?",s=!0;break;case"?":i+="[^/]",s=!0;break;default:i+="\\"+r}l.debug("clearStateChar %j %j",r,i),r=!1}}for(var d,b=0,m=t.length;b<m&&(d=t.charAt(b));b++)if(this.debug("%s\t%s %s %j",t,b,i,d),a&&A[d])i+="\\"+d,a=!1;else switch(d){case"/":return!1;case"\\":g(),a=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",t,b,i,d),h){this.debug("  in class"),"!"===d&&b===p+1&&(d="^"),i+=d;continue}l.debug("call clearStateChar %j",r),g(),r=d,n.noext&&g();continue;case"(":if(h){i+="(";continue}if(!r){i+="\\(";continue}o.push({type:r,start:b-1,reStart:i.length,open:E[r].open,close:E[r].close}),i+="!"===r?"(?:(?!(?:":"(?:",this.debug("plType %j %j",r,i),r=!1;continue;case")":if(h||!o.length){i+="\\)";continue}g(),s=!0;var v=o.pop();i+=v.close,"!"===v.type&&u.push(v),v.reEnd=i.length;continue;case"|":if(h||!o.length||a){i+="\\|",a=!1;continue}g(),i+="|";continue;case"[":if(g(),h){i+="\\"+d;continue}h=!0,p=b,c=i.length,i+=d;continue;case"]":if(b===p+1||!h){i+="\\"+d,a=!1;continue}if(h){var y=t.substring(p+1,b);try{RegExp("["+y+"]")}catch(t){var j=this.parse(y,C);i=i.substr(0,c)+"\\["+j[0]+"\\]",s=s||j[1],h=!1;continue}}s=!0,h=!1,i+=d;continue;default:g(),a?a=!1:!A[d]||"^"===d&&h||(i+="\\"),i+=d}h&&(y=t.substr(p+1),j=this.parse(y,C),i=i.substr(0,c)+"\\["+j[0],s=s||j[1]);for(v=o.pop();v;v=o.pop()){var w=i.slice(v.reStart+v.open.length);this.debug("setting tail",i,v),w=w.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(t,e,n){return n||(n="\\"),e+e+n+"|"})),this.debug("tail=%j\n   %s",w,w,v,i);var x="*"===v.type?"[^/]*?":"?"===v.type?"[^/]":"\\"+v.type;s=!0,i=i.slice(0,v.reStart)+x+"\\("+w}g(),a&&(i+="\\\\");var S=!1;switch(i.charAt(0)){case".":case"[":case"(":S=!0}for(var $=u.length-1;$>-1;$--){var M=u[$],R=i.slice(0,M.reStart),k=i.slice(M.reStart,M.reEnd-8),T=i.slice(M.reEnd-8,M.reEnd),L=i.slice(M.reEnd);T+=L;var N=R.split("(").length-1,B=L;for(b=0;b<N;b++)B=B.replace(/\)[+*?]?/,"");var _="";""===(L=B)&&e!==C&&(_="$"),i=R+k+L+_+T}""!==i&&s&&(i="(?=.)"+i);S&&(i=f+i);if(e===C)return[i,s];if(!s)return function(t){return t.replace(/\\(.)/g,"$1")}(t);var q=n.nocase?"i":"";try{var z=new RegExp("^"+i+"$",q)}catch(t){return new RegExp("$.")}return z._glob=t,z._src=i,z};var C={};M.makeRe=function(t,e){return new R(t,e||{}).makeRe()},R.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,n=e.noglobstar?"[^/]*?":e.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",r=e.nocase?"i":"",i=t.map((function(t){return t.map((function(t){return t===O?n:"string"==typeof t?function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(t):t._src})).join("\\/")})).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch(t){this.regexp=!1}return this.regexp},M.match=function(t,e,n){var r=new R(e,n=n||{});return t=t.filter((function(t){return r.match(t)})),r.options.nonull&&!t.length&&t.push(e),t},R.prototype.match=function(t,e){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;var n=this.options;"/"!==x.sep&&(t=t.split(x.sep).join("/"));t=t.split(S),this.debug(this.pattern,"split",t);var r,i,s=this.set;for(this.debug(this.pattern,"set",s),i=t.length-1;i>=0&&!(r=t[i]);i--);for(i=0;i<s.length;i++){var a=s[i],o=t;if(n.matchBase&&1===a.length&&(o=[r]),this.matchOne(o,a,e))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate},R.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,s=0,a=t.length,o=e.length;i<a&&s<o;i++,s++){this.debug("matchOne loop");var u,h=e[s],c=t[i];if(this.debug(e,h,c),!1===h)return!1;if(h===O){this.debug("GLOBSTAR",[e,h,c]);var p=i,f=s+1;if(f===o){for(this.debug("** at the end");i<a;i++)if("."===t[i]||".."===t[i]||!r.dot&&"."===t[i].charAt(0))return!1;return!0}for(;p<a;){var l=t[p];if(this.debug("\nglobstar while",t,p,e,f,l),this.matchOne(t.slice(p),e.slice(f),n))return this.debug("globstar found match!",p,a,l),!0;if("."===l||".."===l||!r.dot&&"."===l.charAt(0)){this.debug("dot detected!",t,p,e,f);break}this.debug("globstar swallow a segment, and continue"),p++}return!(!n||(this.debug("\n>>> no match, partial?",t,p,e,f),p!==a))}if("string"==typeof h?(u=r.nocase?c.toLowerCase()===h.toLowerCase():c===h,this.debug("string match",h,c,u)):(u=c.match(h),this.debug("pattern match",h,c,u)),!u)return!1}if(i===a&&s===o)return!0;if(i===a)return n;if(s===o)return i===a-1&&""===t[i];throw new Error("wtf?")};var T=(...t)=>[...new Set([].concat(...t))];var L=(t,...e)=>{const n=new Set([].concat(...e));return t.filter((t=>!n.has(t)))};var N=t=>null==t?[]:Array.isArray(t)?t:"string"==typeof t?[t]:"function"==typeof t[Symbol.iterator]?[...t]:[t],B=(t,e,n={})=>{if(t=N(t),e=N(e),0===t.length||0===e.length)return[];let r=[];for(const i of t)for(let t of e){let e=T;"!"===t[0]&&(t=t.slice(1),e=L),r=e(r,w.match([i],t,n))}return r},_=Object.freeze(Object.assign(Object.create(null),B,{default:B}));exports.index=_;
