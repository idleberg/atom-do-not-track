"use strict";var e=require("atom");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function t(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}function n(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function o(e){var t={exports:{}};return e(t,t.exports),t.exports}var r=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=t.presets=void 0;const n={chrome:{supportedSchemes:["http","https","file","ftp"],schemeStarMatchesWs:!1},firefox:{supportedSchemes:["http","https","ws","wss","ftp","ftps","data","file"],schemeStarMatchesWs:!0}};t.presets=n;const o=Object.assign(Object.assign({},n.chrome),{strict:!0});t.defaultOptions=o})),i=function(...e){if(Array.isArray(e[0])){const[t,...n]=e;return l("")(t,...n)}{const[t]=e;return l(t)}};const s={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"},a=/(\\*)#(.*)/g,c=(e,t,n)=>t.length%2?t.slice(1)+"#"+n.replace(a,c):t,l=(e={})=>(t,...n)=>{let o="";t.raw.forEach(((e,t)=>{o+=e.replace(a,c).replace(/\\`/g,"`").replace(/(\\*)(\s+)/g,((e,t,n)=>" "===n[0]&&t.length%2?t.slice(1)+n[0]:t));const r=n[t];r instanceof RegExp?o+=r.source:o+=null!=r?r:""}));let r="";return"string"==typeof e?r=e:Object.entries(s).forEach((([t,n])=>{e[t]&&(r+=n)})),new RegExp(o,r)};var u=Object.defineProperty({regex:i},"__esModule",{value:!0}),f=d,p=function(e,t){return(0,u.regex)(t)`${d(e)}`};function d(e){return e.replace(/[$()*+\-.?[\\\]^{|}]/g,(e=>`\\x${e.codePointAt(0).toString(16).padStart(2,"0")}`))}var h=Object.defineProperty({regexEscape:f,exact:p},"__esModule",{value:!0}),m=function(e,t){const n=e.source.replace(/^\^?([\s\S]*?)\$?$/,"$1");return(0,u.regex)(null!=t?t:e.flags)`${n}`};var g=Object.defineProperty({unwrap:m},"__esModule",{value:!0}),b=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.proxy=void 0;const n=new Proxy(u.regex,{get:(e,t)=>e("_"===t?"":t),apply:(e,t,n)=>e(...n)});t.proxy=n})),y=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"regex",{enumerable:!0,get:function(){return u.regex}}),Object.defineProperty(t,"exact",{enumerable:!0,get:function(){return h.exact}}),Object.defineProperty(t,"regexEscape",{enumerable:!0,get:function(){return h.regexEscape}}),Object.defineProperty(t,"unwrap",{enumerable:!0,get:function(){return g.unwrap}}),Object.defineProperty(t,"proxy",{enumerable:!0,get:function(){return b.proxy}})})),v=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDummyUrl=void 0;const n=/^|$|[/?=&\-]/;t.getDummyUrl=(e,t={})=>{const{rawHost:o,rawPathAndQuery:r}=e,{defaultScheme:i="https",subdomain:s="",pathAndQueryReplacer:a="",rootDomain:c="example.com",strict:l=!0}=t;let u;const f="*"===e.scheme?i:e.scheme;u="file"===f?"":"*"===o?[s,c].filter(Boolean).join("."):o.replace(/^\*./,s?`${s}.`:"");const p=(l?r:"/*").replace(/\*/g,`-${a}-`).replace((0,y.regex)("g")`-+(${n})`,"$1").replace((0,y.regex)("g")`(${n})-+`,"$1").replace(/\/+/g,"/");try{return new URL(`${f}://${u}${p}`)}catch(e){return null}}})),x=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getPatternSegments=void 0;const n=y.regex`
	^
		(\*|\w+)      # scheme
		://
		(
			\*     |  # Any host
			[^/]*     # Only the given host (optional only if scheme is file)
		)
		(/.*)         # path
	$
`;t.getPatternSegments=e=>{if("<all_urls>"===e)return{pattern:e,scheme:"*",rawHost:"*",rawPathAndQuery:"/*"};const t=e.match(n);if(!t)return null;const[,o,r,i]=t;return{pattern:e,scheme:o,rawHost:r,rawPathAndQuery:i}}})),w=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getExampleUrls=void 0;t.getExampleUrls=(e,t)=>{const n=(0,x.getPatternSegments)(e),{supportedSchemes:o,strict:r}=t,i=["","www","foo.bar"],s=["example.com"],a=["","foo","/bar/baz/"],c=o.flatMap((e=>i.flatMap((t=>s.flatMap((o=>a.flatMap((i=>(0,v.getDummyUrl)(n,{defaultScheme:e,subdomain:t,rootDomain:o,pathAndQueryReplacer:i,strict:r})))))))));return[...new Set(c.filter(Boolean).map((e=>e.href)))]}})),$=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ALL_URLS=void 0;t.ALL_URLS="<all_urls>"})),k=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getHostRegex=void 0;t.getHostRegex=e=>{const{pattern:t,scheme:n,rawHost:o}=e;if(!o&&"file"!==n)return new Error('Host is optional only if the scheme is "file".');const r=o.includes("*");if(r){const e=o.split("*.");if(o.length>1&&(2!==e.length||e[0]||!e[1]))return new Error('Host can contain only one wildcard at the start, in the form "*.<host segments>"')}const i=(0,v.getDummyUrl)(e,{subdomain:""});if(!i)return new Error(`Pattern "${t}" cannot be used to construct a valid URL.`);const s=i.host;if(/:\d+$/.test(s))return new Error(`Host "${o}" cannot include a port number. All ports are matched by default.`);if(/[^.a-z0-9\-]/.test(s))return new Error(`Host "${o}" contains invalid characters.`);const a=r?"*."+s:s;return"*"===o?/.+/:a.startsWith("*.")?y.regex`
			^
				(?:[^.]+\.)*     # any number of dot-terminated segments
				${(0,y.regexEscape)(a.slice(2))}   # rest after leading *.
			$
		`:y.regex`^${(0,y.regexEscape)(a)}$`}})),_=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createMatchFn=t.normalizeUrlFragment=void 0;const n=e=>{try{return encodeURI(decodeURI(e))}catch(e){return e}};t.normalizeUrlFragment=n;t.createMatchFn=e=>t=>{let o;try{const e=t instanceof URL?t.href:t;o=new URL(e);const r=n(o.pathname),i=n(o.search);if(r instanceof Error||i instanceof Error)return!1;o.pathname=r,o.href.endsWith("?")||(o.search=i)}catch(e){return!1}return e(o)}})),P=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.toMatchFnOrError=void 0;t.toMatchFnOrError=(e,t)=>{const{supportedSchemes:n,schemeStarMatchesWs:o,strict:r}=t;if(e===$.ALL_URLS)return(0,_.createMatchFn)((e=>y.regex`
				^
					(?:${n.map(y.regexEscape).join("|")})
					:
				$
			`.test(e.protocol)));const i=(0,x.getPatternSegments)(e);if(!i)return new Error(`Pattern "${e}" is invalid`);const{scheme:s,rawPathAndQuery:a}=i;if("*"!==s&&!n.includes(s))return new Error(`Scheme "${s}" is not supported`);const c=y.regex`${"*"===s?["https?",o&&"wss?"].filter(Boolean).join("|"):s}:`,l=(0,k.getHostRegex)(i);if(l instanceof Error)return l;const u=r?(0,_.normalizeUrlFragment)(a):"/*";if(u instanceof Error)return u;const f=y.regex`^${u.split("*").map((e=>(0,y.regexEscape)(e))).join(".*")}$`;return(0,_.createMatchFn)((e=>{const t=e.pathname+(e.href.endsWith("?")?"?":e.search);return c.test(e.protocol)&&l.test(e.host)&&f.test(t)}))}})),M=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.matchPattern=t.matchPatternWithConfig=void 0;const n=e=>t=>{const n=Object.assign(Object.assign({},r.defaultOptions),e),o=(0,P.toMatchFnOrError)(t,n);return o instanceof Error?{valid:!1,error:o,match:()=>!1,get examples(){return[]},pattern:t,config:n}:{valid:!0,match:o,get examples(){return(0,w.getExampleUrls)(t,n).filter((e=>o(e))).slice(0,100)},pattern:t,config:n}};t.matchPatternWithConfig=n;const o=n({});t.matchPattern=o})),E=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"matchPattern",{enumerable:!0,get:function(){return M.matchPattern}}),Object.defineProperty(t,"matchPatternWithConfig",{enumerable:!0,get:function(){return M.matchPatternWithConfig}}),Object.defineProperty(t,"presets",{enumerable:!0,get:function(){return r.presets}})}));function O(e){return e?atom.config.get("do-not-track."+e):atom.config.get("do-not-track")}function j(){}function S(e){return e()}function A(){return Object.create(null)}function U(e){e.forEach(S)}function z(e){return"function"==typeof e}function L(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function R(e,t){e.appendChild(t)}function C(e,t,n){e.insertBefore(t,n||null)}function D(e){e.parentNode.removeChild(e)}function N(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function T(e){return document.createElement(e)}function I(e){return document.createTextNode(e)}function B(){return I(" ")}function H(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function W(e){return function(t){return t.preventDefault(),e.call(this,t)}}function F(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Q(e,t,n){t in e?e[t]=n:F(e,t,n)}function q(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}let G;function Y(e){G=e}function J(e){(function(){if(!G)throw new Error("Function called outside component initialization");return G})().$$.on_destroy.push(e)}const V=[],K=[],X=[],Z=[],ee=Promise.resolve();let te=!1;function ne(e){X.push(e)}let oe=!1;const re=new Set;function ie(){if(!oe){oe=!0;do{for(let e=0;e<V.length;e+=1){const t=V[e];Y(t),se(t.$$)}for(Y(null),V.length=0;K.length;)K.pop()();for(let e=0;e<X.length;e+=1){const t=X[e];re.has(t)||(re.add(t),t())}X.length=0}while(V.length);for(;Z.length;)Z.pop()();te=!1,oe=!1,re.clear()}}function se(e){if(null!==e.fragment){e.update(),U(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ne)}}const ae=new Set;let ce;function le(){ce={r:0,c:[],p:ce}}function ue(){ce.r||U(ce.c),ce=ce.p}function fe(e,t){e&&e.i&&(ae.delete(e),e.i(t))}function pe(e,t,n,o){if(e&&e.o){if(ae.has(e))return;ae.add(e),ce.c.push((()=>{ae.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}const de="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function he(e){e&&e.c()}function me(e,t,n,o){const{fragment:r,on_mount:i,on_destroy:s,after_update:a}=e.$$;r&&r.m(t,n),o||ne((()=>{const t=i.map(S).filter(z);s?s.push(...t):U(t),e.$$.on_mount=[]})),a.forEach(ne)}function ge(e,t){const n=e.$$;null!==n.fragment&&(U(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function be(e,t){-1===e.$$.dirty[0]&&(V.push(e),te||(te=!0,ee.then(ie)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ye(e,t,n,o,r,i,s=[-1]){const a=G;Y(e);const c=e.$$={fragment:null,ctx:null,props:i,update:j,not_equal:r,bound:A(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:t.context||[]),callbacks:A(),dirty:s,skip_bound:!1};let l=!1;if(c.ctx=n?n(e,t.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return c.ctx&&r(c.ctx[t],c.ctx[t]=i)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](i),l&&be(e,t)),n})):[],c.update(),l=!0,U(c.before_update),c.fragment=!!o&&o(c.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);c.fragment&&c.fragment.l(e),e.forEach(D)}else c.fragment&&c.fragment.c();t.intro&&fe(e.$$.fragment),me(e,t.target,t.anchor,t.customElement),ie()}Y(a)}class ve{$destroy(){ge(this,1),this.$destroy=j}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function xe(e){let t,n;return{c(){t=T("div"),n=I(e[1]),F(t,"class","inline-block")},m(e,o){C(e,t,o),R(t,n)},p(e,t){2&t&&q(n,e[1])},d(e){e&&D(t)}}}function we(e){let t,n,o;return{c(){t=T("code"),n=I(e[1]),F(t,"class",o="inline-block "+ke(e[1]))},m(e,o){C(e,t,o),R(t,n)},p(e,r){2&r&&q(n,e[1]),2&r&&o!==(o="inline-block "+ke(e[1]))&&F(t,"class",o)},d(e){e&&D(t)}}}function $e(e){let t,n,o,r,i,s;function a(e,t){return e[2]?we:xe}let c=a(e),l=c(e);return{c(){t=T("list-item"),n=T("div"),o=I(e[0]),r=B(),i=T("divider"),s=B(),l.c(),F(n,"class","inline-block"),F(i,"class","svelte-3h6cae"),Q(t,"class","svelte-3h6cae")},m(e,a){C(e,t,a),R(t,n),R(n,o),R(t,r),R(t,i),R(t,s),l.m(t,null)},p(e,[n]){1&n&&q(o,e[0]),c===(c=a(e))&&l?l.p(e,n):(l.d(1),l=c(e),l&&(l.c(),l.m(t,null)))},i:j,o:j,d(e){e&&D(t),l.d()}}}function ke(e){switch(!0){case parseInt(e,10)>=100:return"highlight-error";case parseInt(e,10)>=25:return"highlight-warning";default:return"highlight-info"}}function _e(e,t,n){let{name:o}=t,{counter:r}=t,{highlight:i}=t;return e.$$set=e=>{"name"in e&&n(0,o=e.name),"counter"in e&&n(1,r=e.counter),"highlight"in e&&n(2,i=e.highlight)},[o,r,i]}class Pe extends ve{constructor(e){var t;super(),document.getElementById("svelte-3h6cae-style")||((t=T("style")).id="svelte-3h6cae-style",t.textContent="list-item.svelte-3h6cae{display:flex;justify-content:space-between;line-height:1.5;margin-bottom:5px;margin-top:5px}divider.svelte-3h6cae{border-top:1px dashed;flex:1 1 0;margin-right:10px;margin-top:.80em;vertical-align:center}",R(document.head,t)),ye(this,e,_e,$e,L,{name:0,counter:1,highlight:2})}}const Me=[];var Ee=function(e,t=j){let n;const o=[];function r(t){if(L(e,t)&&(e=t,n)){const t=!Me.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),Me.push(n,e)}if(t){for(let e=0;e<Me.length;e+=2)Me[e][0](Me[e+1]);Me.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(i,s=j){const a=[i,s];return o.push(a),1===o.length&&(n=t(r)||j),i(e),()=>{const e=o.indexOf(a);-1!==e&&o.splice(e,1),0===o.length&&(n(),n=null)}}}}({counter:0,buttonClass:"subtle",services:{adobe:{counter:0,name:"Adobe Data API",shortName:"Adobe"},bugsnag:{counter:0,name:"Bugsnag",shortName:"Bugsnag"},metrics:{counter:0,name:"Atom Metrics",shortName:"Metrics"},analytics:{counter:0,name:"Google Analytics",shortName:"Analytics"},tagManager:{counter:0,name:"Google Tag Manager",shortName:"Tag Manager"},matomo:{counter:0,name:"Matomo/Piwik",shortName:"Matomo/Piwik"},microsoft:{counter:0,name:"Microsoft",shortName:"Microsoft"},yandex:{counter:0,name:"Yandex",shortName:"Yandex"},others:{counter:0,name:"Others",shortName:"Others"}},customUrls:function(){var e=localStorage.getItem("do-not-track:custom-urls")||"[]";try{return JSON.parse(e)}catch(e){return[]}}()});const{document:Oe}=de;function je(e,t,n){const o=e.slice();return o[8]=t[n],o}function Se(e,t,n){const o=e.slice();return o[11]=t[n],o}function Ae(e){let t,n;return t=new Pe({props:{name:e[0][e[11]].name,counter:e[0][e[11]].counter,highlight:!0}}),{c(){he(t.$$.fragment)},m(e,o){me(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.name=e[0][e[11]].name),1&n&&(o.counter=e[0][e[11]].counter),t.$set(o)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){ge(t,e)}}}function Ue(e){let t,n,o,r,i,s,a,c,l,u=e[8]+"";return{c(){t=T("li"),n=T("button"),o=B(),r=T("span"),i=I(u),s=B(),F(n,"aria-label","Remove URL from list"),F(n,"class","btn btn-xs icon icon-remove-close"),F(r,"class","text-info"),F(t,"class","list-item svelte-pw7z87"),F(t,"title",a=e[8])},m(a,u){C(a,t,u),R(t,n),R(t,o),R(t,r),R(r,i),R(t,s),c||(l=H(n,"click",e[4]),c=!0)},p(e,n){2&n&&u!==(u=e[8]+"")&&q(i,u),2&n&&a!==(a=e[8])&&F(t,"title",a)},d(e){e&&D(t),c=!1,l()}}}function ze(e){let t,n,o,r,i,s,a,c,l,u,f,p,d,h,m,g,b,y,v,x,w,$,k,_,P,M=Object.keys(e[0]),E=[];for(let t=0;t<M.length;t+=1)E[t]=Ae(Se(e,M,t));const O=e=>pe(E[e],1,1,(()=>{E[e]=null}));let j=e[1],S=[];for(let t=0;t<j.length;t+=1)S[t]=Ue(je(e,j,t));return{c(){t=T("section"),n=T("div"),o=T("atom-panel"),r=T("div"),i=T("div"),i.textContent="Blocked Connections",s=B(),a=T("div");for(let e=0;e<E.length;e+=1)E[e].c();c=B(),l=T("div"),u=T("atom-panel"),f=T("div"),p=T("div"),p.textContent="Custom URLs",d=B(),h=T("div"),m=T("p"),m.innerHTML='Here you can add match patterns for URLs. These consist of three parts: scheme, host, and path. The scheme and host are separated by <code>://</code>.\n            See the <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns">MDN documentation</a> for details.',g=B(),b=T("form"),y=T("atom-text-editor"),v=B(),x=T("button"),w=B(),$=T("ul");for(let e=0;e<S.length;e+=1)S[e].c();F(i,"class","panel-heading"),F(a,"class","panel-body padded"),F(r,"class","inset-panel"),F(n,"class","block"),F(p,"class","panel-heading"),Q(y,"id","url-input"),Q(y,"class","editor mini svelte-pw7z87"),Q(y,"mini",""),Q(y,"data-grammar","text plain null-grammar"),Q(y,"placeholder","<scheme>://<host>/<path>"),F(x,"type","submit"),F(x,"aria-label","Add URL to list"),F(x,"class","btn icon icon-gist-new"),F(b,"class","svelte-pw7z87"),F($,"class","list-group"),F(h,"class","panel-body padded"),F(f,"class","inset-panel"),F(l,"class","block"),F(t,"class","svelte-pw7z87")},m(M,O){C(M,t,O),R(t,n),R(n,o),R(o,r),R(r,i),R(r,s),R(r,a);for(let e=0;e<E.length;e+=1)E[e].m(a,null);R(t,c),R(t,l),R(l,u),R(u,f),R(f,p),R(f,d),R(f,h),R(h,m),R(h,g),R(h,b),R(b,y),R(b,v),R(b,x),R(h,w),R(h,$);for(let e=0;e<S.length;e+=1)S[e].m($,null);k=!0,_||(P=[H(y,"keyup",W(e[3])),H(b,"submit",W(e[2]))],_=!0)},p(e,[t]){if(1&t){let n;for(M=Object.keys(e[0]),n=0;n<M.length;n+=1){const o=Se(e,M,n);E[n]?(E[n].p(o,t),fe(E[n],1)):(E[n]=Ae(o),E[n].c(),fe(E[n],1),E[n].m(a,null))}for(le(),n=M.length;n<E.length;n+=1)O(n);ue()}if(18&t){let n;for(j=e[1],n=0;n<j.length;n+=1){const o=je(e,j,n);S[n]?S[n].p(o,t):(S[n]=Ue(o),S[n].c(),S[n].m($,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=j.length}},i(e){if(!k){for(let e=0;e<M.length;e+=1)fe(E[e]);k=!0}},o(e){E=E.filter(Boolean);for(let e=0;e<E.length;e+=1)pe(E[e]);k=!1},d(e){e&&D(t),N(E,e),N(S,e),_=!1,U(P)}}}function Le(e,t,n){let o,r;function i(){!function(e){if(!e.trim().length||!function(e){var t=E.matchPattern(e).valid;return t||atom.notifications.addError("Invalid URL match pattern. [Need help?](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns#examples)"),t}(e))return!1;if(!r.includes(e.trim()))return r.push(e.trim()),s(r),!0}(document.querySelector("#url-input .line .syntax--text").innerText)}async function s(e){const t=e;Ee.update((t=>(t.customUrls=e,t)));const{init:n}=await Promise.resolve().then((function(){return require("./filter-a0bbb15a.js")}));try{await n()}catch(e){Ee.update((e=>(e.customUrls=t,e)))}!function(e){localStorage.setItem("do-not-track:custom-urls",JSON.stringify(e))}(e)}return J(Ee.subscribe((e=>{n(0,o=e.services),n(1,r=e.customUrls)}))),[o,r,i,function(e){"Enter"==e.code&&i()},function(e){const t=e.target.parentNode.innerText.trim(),n=r.indexOf(t);n<0||(r.splice(n,1),s(r))}]}class Re extends ve{constructor(e){var t;super(),Oe.getElementById("svelte-pw7z87-style")||((t=T("style")).id="svelte-pw7z87-style",t.textContent="section.svelte-pw7z87.svelte-pw7z87{padding:5px}form.svelte-pw7z87.svelte-pw7z87{display:flex;margin-bottom:1em}form.svelte-pw7z87 atom-text-editor.svelte-pw7z87{flex-grow:1}li.svelte-pw7z87.svelte-pw7z87{text-overflow:ellipsis;overflow:hidden}",R(Oe.head,t)),ye(this,e,Le,ze,L,{})}}var Ce=function(){function t(){this.subscriptions=new e.CompositeDisposable,this.init()}return t.prototype.getTitle=function(){return"Do Not Track"},t.prototype.getURI=function(){return"atom://do-not-track/settings"},t.prototype.getDefaultLocation=function(){return String(O("interfaceAlignment"))},t.prototype.getElement=function(){var e=document.createElement("do-not-track-settings");return new Re({target:e}),e},t.prototype.getIconName=function(){return"stop"},t.prototype.getDock=function(){return"left"===O("interfaceAlignment")?atom.workspace.getLeftDock():atom.workspace.getRightDock()},t.prototype.init=function(){atom.workspace.open(this,{activatePane:!1,activateItem:!1})},t.prototype.show=function(){this.getDock().show()},t.prototype.hide=function(){this.getDock().hide()},t.prototype.toggle=function(){atom.workspace.toggle(this)},t.prototype.destroy=function(){(null==this?void 0:this.subscriptions)&&this.subscriptions.dispose()},t}(),De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Ne(){if("function"==typeof this.destroy)this.destroy();else if("function"==typeof this.stop)this.stop();else if("function"==typeof this.kill)this.kill();else{if("function"!=typeof this.end)throw new Error("Unable to dispose object");this.end()}}var Te=function(e){return"object"===(void 0===e?"undefined":De(e))&&"function"!=typeof e.dispose&&Object.defineProperty(e,"dispose",{enumerable:!1,configurable:!1,writable:!1,value:Ne}),e};function Ie(e,t,n){const o=e.slice();return o[2]=t[n],o}function Be(e){let t,n;return t=new Pe({props:{name:e[0][e[2]].shortName,counter:e[0][e[2]].counter}}),{c(){he(t.$$.fragment)},m(e,o){me(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.name=e[0][e[2]].shortName),1&n&&(o.counter=e[0][e[2]].counter),t.$set(o)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){ge(t,e)}}}function He(e){let t,n,o,r,i,s=Object.keys(e[0]),a=[];for(let t=0;t<s.length;t+=1)a[t]=Be(Ie(e,s,t));const c=e=>pe(a[e],1,1,(()=>{a[e]=null}));return{c(){t=T("section"),n=T("p"),n.innerHTML="<strong>Blocked Connections</strong>",o=B(),r=T("div");for(let e=0;e<a.length;e+=1)a[e].c();F(r,"class","list-group"),F(t,"class","svelte-1yn2hhz")},m(e,s){C(e,t,s),R(t,n),R(t,o),R(t,r);for(let e=0;e<a.length;e+=1)a[e].m(r,null);i=!0},p(e,[t]){if(1&t){let n;for(s=Object.keys(e[0]),n=0;n<s.length;n+=1){const o=Ie(e,s,n);a[n]?(a[n].p(o,t),fe(a[n],1)):(a[n]=Be(o),a[n].c(),fe(a[n],1),a[n].m(r,null))}for(le(),n=s.length;n<a.length;n+=1)c(n);ue()}},i(e){if(!i){for(let e=0;e<s.length;e+=1)fe(a[e]);i=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)pe(a[e]);i=!1},d(e){e&&D(t),N(a,e)}}}function We(e,t,n){let o;return J(Ee.subscribe((e=>{n(0,o=e.services)}))),[o]}class Fe extends ve{constructor(e){var t;super(),document.getElementById("svelte-1yn2hhz-style")||((t=T("style")).id="svelte-1yn2hhz-style",t.textContent="section.svelte-1yn2hhz{color:inherit}",R(document.head,t)),ye(this,e,We,He,L,{})}}function Qe(e){let t,n,o,r,i,s,a,c=(e[2]&&0!==e[1]?e[1]:"")+"";return{c(){t=T("button"),n=T("span"),o=B(),r=I(c),F(n,"class","icon icon-stop"),F(t,"class",i="inline-block text-"+e[0]+" svelte-d30rb6")},m(e,i){C(e,t,i),R(t,n),R(t,o),R(t,r),s||(a=H(t,"click",qe),s=!0)},p(e,[n]){6&n&&c!==(c=(e[2]&&0!==e[1]?e[1]:"")+"")&&q(r,c),1&n&&i!==(i="inline-block text-"+e[0]+" svelte-d30rb6")&&F(t,"class",i)},i:j,o:j,d(e){e&&D(t),s=!1,a()}}}function qe(){const e=atom.workspace.getActivePane(),t=atom.views.getView(e);atom.commands.dispatch(t,"do-not-track:toggle-settings")}function Ge(e,t,n){let o,r;const i=Ee.subscribe((e=>{n(0,o=e.buttonClass),n(1,r=e.counter)}));let s=O("alwaysShowCounter");return atom.config.observe("do-not-track.alwaysShowCounter",(e=>{n(2,s=e)})),J(i),[o,r,s]}class Ye extends ve{constructor(e){var t;super(),document.getElementById("svelte-d30rb6-style")||((t=T("style")).id="svelte-d30rb6-style",t.textContent="button.svelte-d30rb6{background-color:inherit;border:none}",R(document.head,t)),ye(this,e,Ge,Qe,L,{})}}var Je=function(){function t(){this.subscriptions=new e.CompositeDisposable}return t.prototype.attach=function(e){var t="left"===O("interfaceAlignment")?"addLeftTile":"addRightTile";this.subscriptions.add(Te(e[t]({item:this.render(),priority:100})))},t.prototype.render=function(){var e=document.createElement("do-not-track-button"),t=document.createElement("div");return atom.tooltips.add(e,{item:t}),new Fe({target:t}),new Ye({target:e}),e},t}(),Ve={config:{interfaceAlignment:{title:"Interface Alignment",description:"Specifies on which side the UI aligns. The change will only take effect on the next launch.",type:"string",order:1,enum:[{value:"left",description:"left"},{value:"right",description:"right"}],default:"right"},alwaysShowCounter:{title:"Always Show Counter",description:"Displays a counter next to the status-bar icon",type:"boolean",default:!0,order:2},defaultTracking:{title:"Default Tracking",description:"Default tracking URLs that can be blocked",type:"object",order:3,properties:{adobe:{title:"Adobe",type:"boolean",default:!0,order:1},bugsnag:{title:"Bugsnag",type:"boolean",default:!0,order:1},metrics:{title:"Atom Metrics",type:"boolean",default:!0,order:2},analytics:{title:"Google Analytics",type:"boolean",default:!0,order:3},tagManager:{title:"Google Tag Manager",type:"boolean",default:!0,order:4},matomo:{title:"Matomo/Piwik",type:"boolean",default:!0,order:5},microsoft:{title:"Microsoft",type:"boolean",default:!0,order:6},yandex:{title:"Yandex Metrica",type:"boolean",default:!0,order:7}}}},subscriptions:null,settings:null,statusbar:null,activate:function(){return t(this,void 0,void 0,(function(){var t=this;return n(this,(function(n){switch(n.label){case 0:return this.statusbar=new Je,this.settings=new Ce,[4,Promise.resolve().then((function(){return require("./filter-a0bbb15a.js")}))];case 1:return[4,(0,n.sent().init)()];case 2:return n.sent(),this.subscriptions=new e.CompositeDisposable,this.subscriptions.add(atom.commands.add("atom-workspace",{"do-not-track:toggle-settings":function(){t.settings.toggle()}})),[2]}}))}))},deactivate:function(){var e;null===(e=this.subscriptions)||void 0===e||e.dispose(),this.settings.destroy()},consumeStatusBar:function(e){this.statusbar.attach(e)}};exports.__awaiter=t,exports.__generator=n,exports.getConfig=O,exports.index=Ve,exports.store=Ee,exports.trackingURLs={adobe:["*://cc-api-data.adobe.io/*"],bugsnag:["*://notify.bugsnag.com/*"],metrics:["*://central.github.com/api/usage/atom"],analytics:["*://*.app-measurement.com/*","*://app-measurement.com/*","*://*.google-analytics.com/*","*://google-analytics.com/*"],tagManager:["*://*.googletagmanager.com/*","*://googletagmanager.com/*"],matomo:["*://*/*matomo.js*","*://*/*matomo.php*","*://*/*piwik.js*","*://*/*piwik.php*"],microsoft:["*://*.pipe.aria.microsoft.com/*"],yandex:["*://api-metrica.yandex.net/*","*://api-metrika.yandex.net/*"]};
