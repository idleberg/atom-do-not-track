"use strict";var t=require("atom");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function e(t,e,n,o){return new(n||(n=Promise))((function(r,i){function s(t){try{c(o.next(t))}catch(t){i(t)}}function a(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((o=o.apply(t,e||[])).next())}))}function n(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function o(t){var e={exports:{}};return t(e,e.exports),e.exports}var r=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions=e.presets=void 0;const n={chrome:{supportedSchemes:["http","https","file","ftp"],schemeStarMatchesWs:!1},firefox:{supportedSchemes:["http","https","ws","wss","ftp","ftps","data","file"],schemeStarMatchesWs:!0}};e.presets=n;const o=Object.assign(Object.assign({},n.chrome),{strict:!0});e.defaultOptions=o})),i=function(...t){if(Array.isArray(t[0])){const[e,...n]=t;return l("")(e,...n)}{const[e]=t;return l(e)}};const s={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"},a=/(\\*)#(.*)/g,c=(t,e,n)=>e.length%2?e.slice(1)+"#"+n.replace(a,c):e,l=(t={})=>(e,...n)=>{let o="";e.raw.forEach(((t,e)=>{o+=t.replace(a,c).replace(/\\`/g,"`").replace(/(\\*)(\s+)/g,((t,e,n)=>" "===n[0]&&e.length%2?e.slice(1)+n[0]:e));const r=n[e];r instanceof RegExp?o+=r.source:o+=null!=r?r:""}));let r="";return"string"==typeof t?r=t:Object.entries(s).forEach((([e,n])=>{t[e]&&(r+=n)})),new RegExp(o,r)};var u=Object.defineProperty({regex:i},"__esModule",{value:!0}),f=d,p=function(t,e){return(0,u.regex)(e)`${d(t)}`};function d(t){return t.replace(/[$()*+\-.?[\\\]^{|}]/g,(t=>`\\x${t.codePointAt(0).toString(16).padStart(2,"0")}`))}var h=Object.defineProperty({regexEscape:f,exact:p},"__esModule",{value:!0}),m=function(t,e){const n=t.source.replace(/^\^?([\s\S]*?)\$?$/,"$1");return(0,u.regex)(null!=e?e:t.flags)`${n}`};var g=Object.defineProperty({unwrap:m},"__esModule",{value:!0}),b=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.proxy=void 0;const n=new Proxy(u.regex,{get:(t,e)=>t("_"===e?"":e),apply:(t,e,n)=>t(...n)});e.proxy=n})),y=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"regex",{enumerable:!0,get:function(){return u.regex}}),Object.defineProperty(e,"exact",{enumerable:!0,get:function(){return h.exact}}),Object.defineProperty(e,"regexEscape",{enumerable:!0,get:function(){return h.regexEscape}}),Object.defineProperty(e,"unwrap",{enumerable:!0,get:function(){return g.unwrap}}),Object.defineProperty(e,"proxy",{enumerable:!0,get:function(){return b.proxy}})})),v=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getDummyUrl=void 0;const n=/^|$|[/?=&\-]/;e.getDummyUrl=(t,e={})=>{const{rawHost:o,rawPathAndQuery:r}=t,{defaultScheme:i="https",subdomain:s="",pathAndQueryReplacer:a="",rootDomain:c="example.com",strict:l=!0}=e;let u;const f="*"===t.scheme?i:t.scheme;u="file"===f?"":"*"===o?[s,c].filter(Boolean).join("."):o.replace(/^\*./,s?`${s}.`:"");const p=(l?r:"/*").replace(/\*/g,`-${a}-`).replace((0,y.regex)("g")`-+(${n})`,"$1").replace((0,y.regex)("g")`(${n})-+`,"$1").replace(/\/+/g,"/");try{return new URL(`${f}://${u}${p}`)}catch(t){return null}}})),w=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getPatternSegments=void 0;const n=y.regex`
	^
		(\*|\w+)      # scheme
		://
		(
			\*     |  # Any host
			[^/]*     # Only the given host (optional only if scheme is file)
		)
		(/.*)         # path
	$
`;e.getPatternSegments=t=>{if("<all_urls>"===t)return{pattern:t,scheme:"*",rawHost:"*",rawPathAndQuery:"/*"};const e=t.match(n);if(!e)return null;const[,o,r,i]=e;return{pattern:t,scheme:o,rawHost:r,rawPathAndQuery:i}}})),x=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getExampleUrls=void 0;e.getExampleUrls=(t,e)=>{const n=(0,w.getPatternSegments)(t),{supportedSchemes:o,strict:r}=e,i=["","www","foo.bar"],s=["example.com"],a=["","foo","/bar/baz/"],c=o.flatMap((t=>i.flatMap((e=>s.flatMap((o=>a.flatMap((i=>(0,v.getDummyUrl)(n,{defaultScheme:t,subdomain:e,rootDomain:o,pathAndQueryReplacer:i,strict:r})))))))));return[...new Set(c.filter(Boolean).map((t=>t.href)))]}})),$=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ALL_URLS=void 0;e.ALL_URLS="<all_urls>"})),k=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getHostRegex=void 0;e.getHostRegex=t=>{const{pattern:e,scheme:n,rawHost:o}=t;if(!o&&"file"!==n)return new Error('Host is optional only if the scheme is "file".');const r=o.includes("*");if(r){const t=o.split("*.");if(o.length>1&&(2!==t.length||t[0]||!t[1]))return new Error('Host can contain only one wildcard at the start, in the form "*.<host segments>"')}const i=(0,v.getDummyUrl)(t,{subdomain:""});if(!i)return new Error(`Pattern "${e}" cannot be used to construct a valid URL.`);const s=i.host;if(/:\d+$/.test(s))return new Error(`Host "${o}" cannot include a port number. All ports are matched by default.`);if(/[^.a-z0-9\-]/.test(s))return new Error(`Host "${o}" contains invalid characters.`);const a=r?"*."+s:s;return"*"===o?/.+/:a.startsWith("*.")?y.regex`
			^
				(?:[^.]+\.)*     # any number of dot-terminated segments
				${(0,y.regexEscape)(a.slice(2))}   # rest after leading *.
			$
		`:y.regex`^${(0,y.regexEscape)(a)}$`}})),_=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.createMatchFn=e.normalizeUrlFragment=void 0;const n=t=>{try{return encodeURI(decodeURI(t))}catch(t){return t}};e.normalizeUrlFragment=n;e.createMatchFn=t=>e=>{let o;try{const t=e instanceof URL?e.href:e;o=new URL(t);const r=n(o.pathname),i=n(o.search);if(r instanceof Error||i instanceof Error)return!1;o.pathname=r,o.href.endsWith("?")||(o.search=i)}catch(t){return!1}return t(o)}})),P=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.toMatchFnOrError=void 0;e.toMatchFnOrError=(t,e)=>{const{supportedSchemes:n,schemeStarMatchesWs:o,strict:r}=e;if(t===$.ALL_URLS)return(0,_.createMatchFn)((t=>y.regex`
				^
					(?:${n.map(y.regexEscape).join("|")})
					:
				$
			`.test(t.protocol)));const i=(0,w.getPatternSegments)(t);if(!i)return new Error(`Pattern "${t}" is invalid`);const{scheme:s,rawPathAndQuery:a}=i;if("*"!==s&&!n.includes(s))return new Error(`Scheme "${s}" is not supported`);const c=y.regex`${"*"===s?["https?",o&&"wss?"].filter(Boolean).join("|"):s}:`,l=(0,k.getHostRegex)(i);if(l instanceof Error)return l;const u=r?(0,_.normalizeUrlFragment)(a):"/*";if(u instanceof Error)return u;const f=y.regex`^${u.split("*").map((t=>(0,y.regexEscape)(t))).join(".*")}$`;return(0,_.createMatchFn)((t=>{const e=t.pathname+(t.href.endsWith("?")?"?":t.search);return c.test(t.protocol)&&l.test(t.host)&&f.test(e)}))}})),M=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.matchPattern=e.matchPatternWithConfig=void 0;const n=t=>e=>{const n=Object.assign(Object.assign({},r.defaultOptions),t),o=(0,P.toMatchFnOrError)(e,n);return o instanceof Error?{valid:!1,error:o,match:()=>!1,get examples(){return[]},pattern:e,config:n}:{valid:!0,match:o,get examples(){return(0,x.getExampleUrls)(e,n).filter((t=>o(t))).slice(0,100)},pattern:e,config:n}};e.matchPatternWithConfig=n;const o=n({});e.matchPattern=o})),E=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"matchPattern",{enumerable:!0,get:function(){return M.matchPattern}}),Object.defineProperty(e,"matchPatternWithConfig",{enumerable:!0,get:function(){return M.matchPatternWithConfig}}),Object.defineProperty(e,"presets",{enumerable:!0,get:function(){return r.presets}})}));function j(t){return t?atom.config.get("".concat("do-not-track",".").concat(t)):atom.config.get("do-not-track")}function O(){}function S(t){return t()}function A(){return Object.create(null)}function U(t){t.forEach(S)}function R(t){return"function"==typeof t}function z(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function L(t,e){t.appendChild(e)}function D(t,e,n){const o=function(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;if(e&&e.host)return e;return t.ownerDocument}(t);if(!o.getElementById(e)){const t=H("style");t.id=e,t.textContent=n,function(t,e){L(t.head||t,e)}(o,t)}}function C(t,e,n){t.insertBefore(e,n||null)}function N(t){t.parentNode.removeChild(t)}function T(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function H(t){return document.createElement(t)}function I(t){return document.createTextNode(t)}function B(){return I(" ")}function W(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function F(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Q(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function q(t,e,n){e in t?t[e]="boolean"==typeof t[e]&&""===n||n:Q(t,e,n)}function G(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let Y;function J(t){Y=t}function V(t){(function(){if(!Y)throw new Error("Function called outside component initialization");return Y})().$$.on_destroy.push(t)}const K=[],X=[],Z=[],tt=[],et=Promise.resolve();let nt=!1;function ot(t){Z.push(t)}const rt=new Set;let it=0;function st(){const t=Y;do{for(;it<K.length;){const t=K[it];it++,J(t),at(t.$$)}for(J(null),K.length=0,it=0;X.length;)X.pop()();for(let t=0;t<Z.length;t+=1){const e=Z[t];rt.has(e)||(rt.add(e),e())}Z.length=0}while(K.length);for(;tt.length;)tt.pop()();nt=!1,rt.clear(),J(t)}function at(t){if(null!==t.fragment){t.update(),U(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ot)}}const ct=new Set;let lt;function ut(){lt={r:0,c:[],p:lt}}function ft(){lt.r||U(lt.c),lt=lt.p}function pt(t,e){t&&t.i&&(ct.delete(t),t.i(e))}function dt(t,e,n,o){if(t&&t.o){if(ct.has(t))return;ct.add(t),lt.c.push((()=>{ct.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function ht(t){t&&t.c()}function mt(t,e,n,o){const{fragment:r,on_mount:i,on_destroy:s,after_update:a}=t.$$;r&&r.m(e,n),o||ot((()=>{const e=i.map(S).filter(R);s?s.push(...e):U(e),t.$$.on_mount=[]})),a.forEach(ot)}function gt(t,e){const n=t.$$;null!==n.fragment&&(U(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function bt(t,e){-1===t.$$.dirty[0]&&(K.push(t),nt||(nt=!0,et.then(st)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function yt(t,e,n,o,r,i,s,a=[-1]){const c=Y;J(t);const l=t.$$={fragment:null,ctx:null,props:i,update:O,not_equal:r,bound:A(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:A(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};s&&s(l.root);let u=!1;if(l.ctx=n?n(t,e.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return l.ctx&&r(l.ctx[e],l.ctx[e]=i)&&(!l.skip_bound&&l.bound[e]&&l.bound[e](i),u&&bt(t,e)),n})):[],l.update(),u=!0,U(l.before_update),l.fragment=!!o&&o(l.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);l.fragment&&l.fragment.l(t),t.forEach(N)}else l.fragment&&l.fragment.c();e.intro&&pt(t.$$.fragment),mt(t,e.target,e.anchor,e.customElement),st()}J(c)}class vt{$destroy(){gt(this,1),this.$destroy=O}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function wt(t){D(t,"svelte-3h6cae","list-item.svelte-3h6cae{display:flex;justify-content:space-between;line-height:1.5;margin-bottom:5px;margin-top:5px}divider.svelte-3h6cae{border-top:1px dashed;flex:1 1 0;margin-right:10px;margin-top:.80em;vertical-align:center}")}function xt(t){let e,n;return{c(){e=H("div"),n=I(t[1]),Q(e,"class","inline-block")},m(t,o){C(t,e,o),L(e,n)},p(t,e){2&e&&G(n,t[1])},d(t){t&&N(e)}}}function $t(t){let e,n,o;return{c(){e=H("code"),n=I(t[1]),Q(e,"class",o="inline-block "+_t(t[1]))},m(t,o){C(t,e,o),L(e,n)},p(t,r){2&r&&G(n,t[1]),2&r&&o!==(o="inline-block "+_t(t[1]))&&Q(e,"class",o)},d(t){t&&N(e)}}}function kt(t){let e,n,o,r,i,s;function a(t,e){return t[2]?$t:xt}let c=a(t),l=c(t);return{c(){e=H("list-item"),n=H("div"),o=I(t[0]),r=B(),i=H("divider"),s=B(),l.c(),Q(n,"class","inline-block"),Q(i,"class","svelte-3h6cae"),q(e,"class","svelte-3h6cae")},m(t,a){C(t,e,a),L(e,n),L(n,o),L(e,r),L(e,i),L(e,s),l.m(e,null)},p(t,[n]){1&n&&G(o,t[0]),c===(c=a(t))&&l?l.p(t,n):(l.d(1),l=c(t),l&&(l.c(),l.m(e,null)))},i:O,o:O,d(t){t&&N(e),l.d()}}}function _t(t){switch(!0){case parseInt(t,10)>=100:return"highlight-error";case parseInt(t,10)>=25:return"highlight-warning";default:return"highlight-info"}}function Pt(t,e,n){let{name:o}=e,{counter:r}=e,{highlight:i}=e;return t.$$set=t=>{"name"in t&&n(0,o=t.name),"counter"in t&&n(1,r=t.counter),"highlight"in t&&n(2,i=t.highlight)},[o,r,i]}class Mt extends vt{constructor(t){super(),yt(this,t,Pt,kt,z,{name:0,counter:1,highlight:2},wt)}}const Et=[];var jt=function(t,e=O){let n;const o=new Set;function r(e){if(z(t,e)&&(t=e,n)){const e=!Et.length;for(const e of o)e[1](),Et.push(e,t);if(e){for(let t=0;t<Et.length;t+=2)Et[t][0](Et[t+1]);Et.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(i,s=O){const a=[i,s];return o.add(a),1===o.size&&(n=e(r)||O),i(t),()=>{o.delete(a),0===o.size&&(n(),n=null)}}}}({counter:0,buttonClass:"subtle",services:{adobe:{counter:0,name:"Adobe Data API",shortName:"Adobe"},bugsnag:{counter:0,name:"Bugsnag",shortName:"Bugsnag"},metrics:{counter:0,name:"Atom Metrics",shortName:"Metrics"},analytics:{counter:0,name:"Google Analytics",shortName:"Analytics"},tagManager:{counter:0,name:"Google Tag Manager",shortName:"Tag Manager"},matomo:{counter:0,name:"Matomo/Piwik",shortName:"Matomo/Piwik"},microsoft:{counter:0,name:"Microsoft",shortName:"Microsoft"},yandex:{counter:0,name:"Yandex",shortName:"Yandex"},others:{counter:0,name:"Others",shortName:"Others"}},customUrls:function(){var t=localStorage.getItem("do-not-track:custom-urls")||"[]";try{return JSON.parse(t)}catch(t){return[]}}()});function Ot(t){D(t,"svelte-pw7z87","section.svelte-pw7z87.svelte-pw7z87{padding:5px}form.svelte-pw7z87.svelte-pw7z87{display:flex;margin-bottom:1em}form.svelte-pw7z87 atom-text-editor.svelte-pw7z87{flex-grow:1}li.svelte-pw7z87.svelte-pw7z87{text-overflow:ellipsis;overflow:hidden}")}function St(t,e,n){const o=t.slice();return o[8]=e[n],o}function At(t,e,n){const o=t.slice();return o[11]=e[n],o}function Ut(t){let e,n;return e=new Mt({props:{name:t[0][t[11]].name,counter:t[0][t[11]].counter,highlight:!0}}),{c(){ht(e.$$.fragment)},m(t,o){mt(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.name=t[0][t[11]].name),1&n&&(o.counter=t[0][t[11]].counter),e.$set(o)},i(t){n||(pt(e.$$.fragment,t),n=!0)},o(t){dt(e.$$.fragment,t),n=!1},d(t){gt(e,t)}}}function Rt(t){let e,n,o,r,i,s,a,c,l,u=t[8]+"";return{c(){e=H("li"),n=H("button"),o=B(),r=H("span"),i=I(u),s=B(),Q(n,"aria-label","Remove URL from list"),Q(n,"class","btn btn-xs icon icon-remove-close"),Q(r,"class","text-info"),Q(e,"class","list-item svelte-pw7z87"),Q(e,"title",a=t[8])},m(a,u){C(a,e,u),L(e,n),L(e,o),L(e,r),L(r,i),L(e,s),c||(l=W(n,"click",t[4]),c=!0)},p(t,n){2&n&&u!==(u=t[8]+"")&&G(i,u),2&n&&a!==(a=t[8])&&Q(e,"title",a)},d(t){t&&N(e),c=!1,l()}}}function zt(t){let e,n,o,r,i,s,a,c,l,u,f,p,d,h,m,g,b,y,v,w,x,$,k,_,P,M=Object.keys(t[0]),E=[];for(let e=0;e<M.length;e+=1)E[e]=Ut(At(t,M,e));const j=t=>dt(E[t],1,1,(()=>{E[t]=null}));let O=t[1],S=[];for(let e=0;e<O.length;e+=1)S[e]=Rt(St(t,O,e));return{c(){e=H("section"),n=H("div"),o=H("atom-panel"),r=H("div"),i=H("div"),i.textContent="Blocked Connections",s=B(),a=H("div");for(let t=0;t<E.length;t+=1)E[t].c();c=B(),l=H("div"),u=H("atom-panel"),f=H("div"),p=H("div"),p.textContent="Custom URLs",d=B(),h=H("div"),m=H("p"),m.innerHTML='Here you can add match patterns for URLs. These consist of three parts: scheme, host, and path. The scheme and host are separated by <code>://</code>.\n            See the <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns">MDN documentation</a> for details.',g=B(),b=H("form"),y=H("atom-text-editor"),v=B(),w=H("button"),x=B(),$=H("ul");for(let t=0;t<S.length;t+=1)S[t].c();Q(i,"class","panel-heading"),Q(a,"class","panel-body padded"),Q(r,"class","inset-panel"),Q(n,"class","block"),Q(p,"class","panel-heading"),q(y,"id","url-input"),q(y,"class","editor mini svelte-pw7z87"),q(y,"mini",""),q(y,"data-grammar","text plain null-grammar"),q(y,"placeholder","<scheme>://<host>/<path>"),Q(w,"type","submit"),Q(w,"aria-label","Add URL to list"),Q(w,"class","btn icon icon-gist-new"),Q(b,"class","svelte-pw7z87"),Q($,"class","list-group"),Q(h,"class","panel-body padded"),Q(f,"class","inset-panel"),Q(l,"class","block"),Q(e,"class","svelte-pw7z87")},m(M,j){C(M,e,j),L(e,n),L(n,o),L(o,r),L(r,i),L(r,s),L(r,a);for(let t=0;t<E.length;t+=1)E[t].m(a,null);L(e,c),L(e,l),L(l,u),L(u,f),L(f,p),L(f,d),L(f,h),L(h,m),L(h,g),L(h,b),L(b,y),L(b,v),L(b,w),L(h,x),L(h,$);for(let t=0;t<S.length;t+=1)S[t].m($,null);k=!0,_||(P=[W(y,"keyup",F(t[3])),W(b,"submit",F(t[2]))],_=!0)},p(t,[e]){if(1&e){let n;for(M=Object.keys(t[0]),n=0;n<M.length;n+=1){const o=At(t,M,n);E[n]?(E[n].p(o,e),pt(E[n],1)):(E[n]=Ut(o),E[n].c(),pt(E[n],1),E[n].m(a,null))}for(ut(),n=M.length;n<E.length;n+=1)j(n);ft()}if(18&e){let n;for(O=t[1],n=0;n<O.length;n+=1){const o=St(t,O,n);S[n]?S[n].p(o,e):(S[n]=Rt(o),S[n].c(),S[n].m($,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=O.length}},i(t){if(!k){for(let t=0;t<M.length;t+=1)pt(E[t]);k=!0}},o(t){E=E.filter(Boolean);for(let t=0;t<E.length;t+=1)dt(E[t]);k=!1},d(t){t&&N(e),T(E,t),T(S,t),_=!1,U(P)}}}function Lt(t,e,n){let o,r;function i(){!function(t){if(!t.trim().length||!function(t){var e=E.matchPattern(t).valid;return e||atom.notifications.addError("Invalid URL match pattern. [Need help?](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns#examples)"),e}(t))return!1;if(!r.includes(t.trim()))return r.push(t.trim()),s(r),!0}(document.querySelector("#url-input .line .syntax--text").innerText)}async function s(t){const e=t;jt.update((e=>(e.customUrls=t,e)));const{init:n}=await Promise.resolve().then((function(){return require("./filter-86497584.js")}));try{await n()}catch(t){jt.update((t=>(t.customUrls=e,t)))}!function(t){localStorage.setItem("do-not-track:custom-urls",JSON.stringify(t))}(t)}return V(jt.subscribe((t=>{n(0,o=t.services),n(1,r=t.customUrls)}))),[o,r,i,function(t){"Enter"==t.code&&i()},function(t){const e=t.target.parentNode.innerText.trim(),n=r.indexOf(e);n<0||(r.splice(n,1),s(r))}]}class Dt extends vt{constructor(t){super(),yt(this,t,Lt,zt,z,{},Ot)}}var Ct=function(){function e(){this.subscriptions=new t.CompositeDisposable,this.init()}return e.prototype.getTitle=function(){return"Do Not Track"},e.prototype.getURI=function(){return"atom://do-not-track/settings"},e.prototype.getDefaultLocation=function(){return String(j("interfaceAlignment"))},e.prototype.getElement=function(){var t=document.createElement("do-not-track-settings");return new Dt({target:t}),t},e.prototype.getIconName=function(){return"stop"},e.prototype.getDock=function(){return"left"===j("interfaceAlignment")?atom.workspace.getLeftDock():atom.workspace.getRightDock()},e.prototype.init=function(){atom.workspace.open(this,{activatePane:!1,activateItem:!1})},e.prototype.show=function(){this.getDock().show()},e.prototype.hide=function(){this.getDock().hide()},e.prototype.toggle=function(){atom.workspace.toggle(this)},e.prototype.destroy=function(){(null==this?void 0:this.subscriptions)&&this.subscriptions.dispose()},e}(),Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Tt(){if("function"==typeof this.destroy)this.destroy();else if("function"==typeof this.stop)this.stop();else if("function"==typeof this.kill)this.kill();else{if("function"!=typeof this.end)throw new Error("Unable to dispose object");this.end()}}var Ht=function(t){return"object"===(void 0===t?"undefined":Nt(t))&&"function"!=typeof t.dispose&&Object.defineProperty(t,"dispose",{enumerable:!1,configurable:!1,writable:!1,value:Tt}),t};function It(t){D(t,"svelte-1yn2hhz","section.svelte-1yn2hhz{color:inherit}")}function Bt(t,e,n){const o=t.slice();return o[2]=e[n],o}function Wt(t){let e,n;return e=new Mt({props:{name:t[0][t[2]].shortName,counter:t[0][t[2]].counter}}),{c(){ht(e.$$.fragment)},m(t,o){mt(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.name=t[0][t[2]].shortName),1&n&&(o.counter=t[0][t[2]].counter),e.$set(o)},i(t){n||(pt(e.$$.fragment,t),n=!0)},o(t){dt(e.$$.fragment,t),n=!1},d(t){gt(e,t)}}}function Ft(t){let e,n,o,r,i,s=Object.keys(t[0]),a=[];for(let e=0;e<s.length;e+=1)a[e]=Wt(Bt(t,s,e));const c=t=>dt(a[t],1,1,(()=>{a[t]=null}));return{c(){e=H("section"),n=H("p"),n.innerHTML="<strong>Blocked Connections</strong>",o=B(),r=H("div");for(let t=0;t<a.length;t+=1)a[t].c();Q(r,"class","list-group"),Q(e,"class","svelte-1yn2hhz")},m(t,s){C(t,e,s),L(e,n),L(e,o),L(e,r);for(let t=0;t<a.length;t+=1)a[t].m(r,null);i=!0},p(t,[e]){if(1&e){let n;for(s=Object.keys(t[0]),n=0;n<s.length;n+=1){const o=Bt(t,s,n);a[n]?(a[n].p(o,e),pt(a[n],1)):(a[n]=Wt(o),a[n].c(),pt(a[n],1),a[n].m(r,null))}for(ut(),n=s.length;n<a.length;n+=1)c(n);ft()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)pt(a[t]);i=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)dt(a[t]);i=!1},d(t){t&&N(e),T(a,t)}}}function Qt(t,e,n){let o;return V(jt.subscribe((t=>{n(0,o=t.services)}))),[o]}class qt extends vt{constructor(t){super(),yt(this,t,Qt,Ft,z,{},It)}}function Gt(t){D(t,"svelte-d30rb6","button.svelte-d30rb6{background-color:inherit;border:none}")}function Yt(t){let e,n,o,r,i,s,a,c=(t[2]&&0!==t[1]?t[1]:"")+"";return{c(){e=H("button"),n=H("span"),o=B(),r=I(c),Q(n,"class","icon icon-stop"),Q(e,"class",i="inline-block text-"+t[0]+" svelte-d30rb6")},m(t,i){C(t,e,i),L(e,n),L(e,o),L(e,r),s||(a=W(e,"click",Jt),s=!0)},p(t,[n]){6&n&&c!==(c=(t[2]&&0!==t[1]?t[1]:"")+"")&&G(r,c),1&n&&i!==(i="inline-block text-"+t[0]+" svelte-d30rb6")&&Q(e,"class",i)},i:O,o:O,d(t){t&&N(e),s=!1,a()}}}function Jt(){const t=atom.workspace.getActivePane(),e=atom.views.getView(t);atom.commands.dispatch(e,"do-not-track:toggle-settings")}function Vt(t,e,n){let o,r;const i=jt.subscribe((t=>{n(0,o=t.buttonClass),n(1,r=t.counter)}));let s=j("alwaysShowCounter");return atom.config.observe("do-not-track.alwaysShowCounter",(t=>{n(2,s=t)})),V(i),[o,r,s]}class Kt extends vt{constructor(t){super(),yt(this,t,Vt,Yt,z,{},Gt)}}var Xt=function(){function e(){this.subscriptions=new t.CompositeDisposable}return e.prototype.attach=function(t){var e="left"===j("interfaceAlignment")?"addLeftTile":"addRightTile";this.subscriptions.add(Ht(t[e]({item:this.render(),priority:100})))},e.prototype.render=function(){var t=document.createElement("do-not-track-button"),e=document.createElement("div");return atom.tooltips.add(t,{item:e}),new qt({target:e}),new Kt({target:t}),t},e}(),Zt={config:{interfaceAlignment:{title:"Interface Alignment",description:"Specifies on which side the UI aligns. The change will only take effect on the next launch.",type:"string",order:1,enum:[{value:"left",description:"left"},{value:"right",description:"right"}],default:"right"},alwaysShowCounter:{title:"Always Show Counter",description:"Displays a counter next to the status-bar icon",type:"boolean",default:!0,order:2},defaultTracking:{title:"Default Tracking",description:"Default tracking URLs that can be blocked",type:"object",order:3,properties:{adobe:{title:"Adobe",type:"boolean",default:!0,order:1},bugsnag:{title:"Bugsnag",type:"boolean",default:!0,order:1},metrics:{title:"Atom Metrics",type:"boolean",default:!0,order:2},analytics:{title:"Google Analytics",type:"boolean",default:!0,order:3},tagManager:{title:"Google Tag Manager",type:"boolean",default:!0,order:4},matomo:{title:"Matomo/Piwik",type:"boolean",default:!0,order:5},microsoft:{title:"Microsoft",type:"boolean",default:!0,order:6},yandex:{title:"Yandex Metrica",type:"boolean",default:!0,order:7}}}},subscriptions:null,settings:null,statusbar:null,activate:function(){return e(this,void 0,void 0,(function(){var e=this;return n(this,(function(n){switch(n.label){case 0:return this.statusbar=new Xt,this.settings=new Ct,[4,Promise.resolve().then((function(){return require("./filter-86497584.js")}))];case 1:return[4,(0,n.sent().init)()];case 2:return n.sent(),this.subscriptions=new t.CompositeDisposable,this.subscriptions.add(atom.commands.add("atom-workspace",{"do-not-track:toggle-settings":function(){e.settings.toggle()}})),[2]}}))}))},deactivate:function(){var t;null===(t=this.subscriptions)||void 0===t||t.dispose(),this.settings.destroy()},consumeStatusBar:function(t){this.statusbar.attach(t)}};exports.__awaiter=e,exports.__generator=n,exports.getConfig=j,exports.index=Zt,exports.store=jt,exports.trackingURLs={adobe:["*://cc-api-data.adobe.io/*"],bugsnag:["*://notify.bugsnag.com/*"],metrics:["*://central.github.com/api/usage/atom"],analytics:["*://*.app-measurement.com/*","*://app-measurement.com/*","*://*.google-analytics.com/*","*://google-analytics.com/*"],tagManager:["*://*.googletagmanager.com/*","*://googletagmanager.com/*"],matomo:["*://*/*matomo.js*","*://*/*matomo.php*","*://*/*piwik.js*","*://*/*piwik.php*"],microsoft:["*://*.pipe.aria.microsoft.com/*"],yandex:["*://api-metrica.yandex.net/*","*://api-metrika.yandex.net/*"]};
